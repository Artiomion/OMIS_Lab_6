{% extends "base.html" %}

{% block title %}–ü–∞–Ω–µ–ª—å —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è{% endblock %}

{% block content %}
<h2>üëî –ü–∞–Ω–µ–ª—å —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è - {{ current_user.company_name or current_user.name }}</h2>

<div class="stats">
    <div class="stat-card">
        <h3>{{ vacancies_count }}</h3>
        <p>–í—Å–µ–≥–æ –≤–∞–∫–∞–Ω—Å–∏–π</p>
    </div>
    <div class="stat-card">
        <h3>{{ published_count }}</h3>
        <p>–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</p>
    </div>
    <div class="stat-card">
        <h3>{{ applications_count }}</h3>
        <p>–í—Å–µ–≥–æ –æ—Ç–∫–ª–∏–∫–æ–≤</p>
    </div>
    <div class="stat-card">
        <h3>{{ pending_count }}</h3>
        <p>–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏</p>
    </div>
</div>

<div class="card">
    <h3>üíº –ú–æ–∏ –≤–∞–∫–∞–Ω—Å–∏–∏</h3>
    {% if my_vacancies %}
        <table>
            <thead>
                <tr>
                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–û—Ç–∫–ª–∏–∫–æ–≤</th>
                    <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for vacancy in my_vacancies %}
                <tr>
                    <td><a href="{{ url_for('vacancy.view', vacancy_id=vacancy.id) }}">{{ vacancy.title }}</a></td>
                    <td><span class="badge {{ vacancy.status }}">{{ vacancy.status }}</span></td>
                    <td>{{ vacancy.applications.count() }}</td>
                    <td>{{ vacancy.created_at.strftime('%d.%m.%Y') }}</td>
                    <td>
                        <a href="{{ url_for('vacancy.applications', vacancy_id=vacancy.id) }}" class="button" style="padding: 0.3rem 0.6rem; font-size: 0.85rem;">–û—Ç–∫–ª–∏–∫–∏</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <a href="{{ url_for('vacancy.my_vacancies') }}" class="button secondary" style="margin-top: 1rem;">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ</a>
    {% else %}
        <div class="empty-state">
            <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –≤–∞–∫–∞–Ω—Å–∏–π</p>
            <p><a href="{{ url_for('vacancy.create') }}" class="button" style="margin-top: 1rem;">–°–æ–∑–¥–∞—Ç—å –≤–∞–∫–∞–Ω—Å–∏—é</a></p>
        </div>
    {% endif %}
</div>

<div class="card">
    <h3>üì® –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–∫–ª–∏–∫–∏</h3>
    {% if recent_applications %}
        <table>
            <thead>
                <tr>
                    <th>–°–æ–∏—Å–∫–∞—Ç–µ–ª—å</th>
                    <th>–í–∞–∫–∞–Ω—Å–∏—è</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–î–∞—Ç–∞</th>
                </tr>
            </thead>
            <tbody>
                {% for app in recent_applications %}
                <tr>
                    <td>{{ app.applicant.name }}</td>
                    <td><a href="{{ url_for('vacancy.view', vacancy_id=app.vacancy.id) }}">{{ app.vacancy.title }}</a></td>
                    <td><span class="badge {{ app.status }}">{{ app.status }}</span></td>
                    <td>{{ app.created_at.strftime('%d.%m.%Y') }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <div class="empty-state">
            <p>–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∫–ª–∏–∫–æ–≤ –Ω–∞ –≤–∞—à–∏ –≤–∞–∫–∞–Ω—Å–∏–∏</p>
        </div>
    {% endif %}
</div>
{% endblock %}