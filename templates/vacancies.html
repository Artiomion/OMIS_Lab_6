{% extends "base.html" %}

{% block title %}–í–∞–∫–∞–Ω—Å–∏–∏{% endblock %}

{% block content %}
<h2>üíº –í–∞–∫–∞–Ω—Å–∏–∏</h2>

<div class="search-box">
    <form method="GET">
        <input type="text" name="q" value="{{ query }}" 
               placeholder="–ü–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –æ–ø–∏—Å–∞–Ω–∏—é –∏–ª–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º..." autofocus>
    </form>
</div>

{% if vacancies %}
    <p style="margin-bottom: 1rem; color: #6c757d;">–ù–∞–π–¥–µ–Ω–æ –≤–∞–∫–∞–Ω—Å–∏–π: {{ vacancies|length }}</p>
    
    {% for vacancy in vacancies %}
    <div class="card">
        <h3>{{ vacancy.title }}</h3>
        <p style="color: #6c757d;">
            <strong>{{ vacancy.employer.company_name or vacancy.employer.name }}</strong>
            {% if vacancy.location %} | üìç {{ vacancy.location }}{% endif %}
        </p>
        
        {% if vacancy.salary %}
        <p><strong>–ó–∞—Ä–ø–ª–∞—Ç–∞:</strong> {{ vacancy.salary }} $</p>
        {% endif %}
        
        <p>{{ vacancy.description[:250] }}{% if vacancy.description|length > 250 %}...{% endif %}</p>
        
        <p style="color: #6c757d; font-size: 0.9rem; margin-top: 0.5rem;">
            –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: {{ vacancy.created_at.strftime('%d.%m.%Y') }}
        </p>
        
        <a href="{{ url_for('vacancy.view', vacancy_id=vacancy.id) }}" class="button">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
    </div>
    {% endfor %}
{% else %}
    <div class="empty-state">
        <p style="font-size: 1.2rem;">–í–∞–∫–∞–Ω—Å–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>
        {% if query %}
            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
        {% else %}
            <p>–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π</p>
        {% endif %}
    </div>
{% endif %}
{% endblock %}