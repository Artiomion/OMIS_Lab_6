{% extends "base.html" %}

{% block title %}–ü–æ–∏—Å–∫ —Ä–µ–∑—é–º–µ{% endblock %}

{% block content %}
<h2>üîç –ü–æ–∏—Å–∫ —Ä–µ–∑—é–º–µ</h2>

<div class="search-box">
    <form method="GET">
        <input type="text" name="q" value="{{ query }}" 
               placeholder="–ü–æ–∏—Å–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É, –Ω–∞–≤—ã–∫–∞–º –∏–ª–∏ –æ–ø—ã—Ç—É..." autofocus>
    </form>
</div>

{% if resumes %}
    <p style="margin-bottom: 1rem; color: #6c757d;">–ù–∞–π–¥–µ–Ω–æ —Ä–µ–∑—é–º–µ: {{ resumes|length }}</p>
    
    {% for resume in resumes %}
    <div class="card">
        <h3>{{ resume.title }}</h3>
        <p style="color: #6c757d;"><strong>–ê–≤—Ç–æ—Ä:</strong> {{ resume.applicant.name }}</p>
        
        {% if resume.education %}
        <p><strong>–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:</strong> {{ resume.education[:100] }}{% if resume.education|length > 100 %}...{% endif %}</p>
        {% endif %}
        
        {% if resume.skills %}
        <p><strong>–ù–∞–≤—ã–∫–∏:</strong> {{ resume.skills[:150] }}{% if resume.skills|length > 150 %}...{% endif %}</p>
        {% endif %}
        
        {% if resume.experience %}
        <p><strong>–û–ø—ã—Ç:</strong> {{ resume.experience[:150] }}{% if resume.experience|length > 150 %}...{% endif %}</p>
        {% endif %}
        
        <p style="color: #6c757d; font-size: 0.9rem; margin-top: 0.5rem;">
            –û–±–Ω–æ–≤–ª–µ–Ω–æ: {{ resume.updated_at.strftime('%d.%m.%Y') }}
        </p>
        
        <a href="{{ url_for('resume.view', resume_id=resume.id) }}" class="button">–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a>
    </div>
    {% endfor %}
{% else %}
    <div class="empty-state">
        <p style="font-size: 1.2rem;">–†–µ–∑—é–º–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
        {% if query %}
            <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
        {% else %}
            <p>–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞</p>
        {% endif %}
    </div>
{% endif %}
{% endblock %}