{% extends "base.html" %}

{% block title %}–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞{% endblock %}

{% block content %}
<h2>üõ†Ô∏è –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>

<div class="stats">
    <div class="stat-card">
        <h3>{{ reports.total_users }}</h3>
        <p>–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
    </div>
    <div class="stat-card">
        <h3>{{ reports.total_applicants }}</h3>
        <p>–°–æ–∏—Å–∫–∞—Ç–µ–ª–µ–π</p>
    </div>
    <div class="stat-card">
        <h3>{{ reports.total_employers }}</h3>
        <p>–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π</p>
    </div>
    <div class="stat-card">
        <h3>{{ reports.total_resumes }}</h3>
        <p>–†–µ–∑—é–º–µ</p>
    </div>
    <div class="stat-card">
        <h3>{{ reports.total_vacancies }}</h3>
        <p>–í–∞–∫–∞–Ω—Å–∏–π</p>
    </div>
    <div class="stat-card">
        <h3>{{ reports.total_applications }}</h3>
        <p>–û—Ç–∫–ª–∏–∫–æ–≤</p>
    </div>
    <div class="stat-card">
        <h3>{{ reports.blocked_users }}</h3>
        <p>–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ</p>
    </div>
</div>

<div class="card">
    <h3>üë• –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
    {% if recent_users %}
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–ò–º—è</th>
                    <th>Email</th>
                    <th>–†–æ–ª—å</th>
                    <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                </tr>
            </thead>
            <tbody>
                {% for user in recent_users %}
                <tr>
                    <td>{{ user.id }}</td>
                    <td>{{ user.name }}</td>
                    <td>{{ user.email }}</td>
                    <td><span class="badge">{{ user.role }}</span></td>
                    <td>{{ user.created_at.strftime('%d.%m.%Y') }}</td>
                    <td>
                        {% if user.is_blocked %}
                            <span class="badge rejected">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</span>
                        {% else %}
                            <span class="badge accepted">–ê–∫—Ç–∏–≤–µ–Ω</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <a href="{{ url_for('admin.users') }}" class="button" style="margin-top: 1rem;">–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
    {% endif %}
</div>

<div class="card">
    <h3>üìä –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</h3>
    <a href="{{ url_for('admin.reports') }}" class="button">–î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã</a>
    <a href="{{ url_for('admin.users') }}" class="button secondary">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</a>
</div>
{% endblock %}